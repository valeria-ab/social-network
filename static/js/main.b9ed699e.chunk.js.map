{"version":3,"sources":["redux/dialogs-reducer.ts","components/Users/Users.module.css","api/api.ts","components/Navbar/Navbar.module.css","components/Header/Header.tsx","redux/auth-reducer.ts","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","components/Navbar/Navbar.tsx","utils/object-helpers.ts","redux/users-reducer.ts","common/Paginator/Paginator.tsx","components/Users/User.tsx","components/Users/Users.tsx","redux/users-selectors.ts","components/Users/UsersContainer.tsx","hoc/withSuspense.tsx","redux/app-reducer.ts","App.tsx","redux/sidebar-reducer.js","redux/redux-store.ts","index.tsx","common/FormsControls/FormsControls.tsx","common/FormsControls/FormsControls.module.css","common/Preloader/Preloader.jsx","common/Preloader/preloader.png","components/Header/Header.module.css","common/Paginator/Paginator.module.css","utils/validators/validators.ts","redux/profile-reducer.ts"],"names":["initialState","dialogsData","id","name","messagesData","message","isAuth","dialogsReducer","state","action","type","newMessage","newMessageBody","sendMessage","module","exports","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","followUser","userId","post","unfollowUser","delete","profileAPI","getProfile","getStatus","updateStatus","status","put","authAPI","me","login","email","password","rememberMe","logout","Header","props","className","styles","header","logo","src","alt","loginBlock","onClick","to","SET_USER_DATA","setAuthUserData","payload","getAuthUserData","dispatch","getState","a","resultCode","authReducer","HeaderComponent","this","React","Component","connect","auth","console","log","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","createField","requiredField","Input","s","formSummaryError","messages","length","stopSubmit","_error","formData","Navbar","nav","item","activeClassName","active","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","followSuccess","userID","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginator","filter","p","selectedPage","pageNumber","User","user","follow","unfollow","photos","small","userPhoto","followed","disabled","some","Users","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","requestUsers","Preloader","compose","requestedPage","totalCount","count","bind","withSuspense","Suspense","fallback","INITIALIZED_SUCCSESS","initialized","DialogsContainer","lazy","ProfileContainer","App","initializeApp","HeaderContainer","path","render","withRouter","app","promise","Promise","all","sidebarReducer","rootReducer","combineReducers","profilePage","profileReducer","dialogsPage","sidebar","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","basename","process","document","getElementById","FormControl","input","meta","touched","children","hasError","formControl","Textarea","restProps","child","placeholder","validators","component","text","validate","value","maxLengthCreator","maxLength","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_USER_STATUS","profile","postsData","postMessage","likesCount","AddPostActionCreator","newPostText","setUserStatus","getUserProfile","getUserStatus","updateUserStatus","newPost","postId"],"mappings":"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","file":"static/js/main.b9ed699e.chunk.js","sourcesContent":["import { ActionTypes } from \"./redux-store\";\r\n\r\nexport type DialogsPageType = typeof initialState\r\n\r\nexport type SendMessageActionType = ReturnType<typeof sendMessage>\r\n\r\n\r\ntype DialogType = {\r\n    id: number\r\n    name: string\r\n}\r\ntype MessageType = {\r\n    id: number\r\n    message: string\r\n}\r\nconst initialState = {\r\n    dialogsData: [\r\n        { id: 1, name: 'Саша' },\r\n        { id: 2, name: 'Света' },\r\n        { id: 3, name: 'Полина' },\r\n        { id: 4, name: 'Brad' }\r\n    ] as Array<DialogType>,\r\n    messagesData: [\r\n        { id: 1, message: 'Я разбогател!' },\r\n        { id: 2, message: 'Я набухалась' },\r\n        { id: 3, message: 'Диди, тип ти!' },\r\n        { id: 4, message: 'Frogs say: \"ribit, ribit\" ' }\r\n    ] as Array<MessageType>,\r\n    isAuth: false\r\n}\r\n\r\nconst dialogsReducer = (state: DialogsPageType = initialState, action: any): DialogsPageType => {\r\n    let stateCopy;\r\n\r\n    switch (action.type) {\r\n        case 'SEND-MESSAGE':\r\n            let newMessage = {\r\n                id: 5,\r\n                message: action.newMessageBody,\r\n            }\r\n            stateCopy = {\r\n                ...state,\r\n                messagesData: [...state.messagesData, newMessage]\r\n            }\r\n\r\n            return stateCopy;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default dialogsReducer;\r\n\r\n\r\nexport const sendMessage = (newMessageBody: string) => ({\r\n    type: 'SEND-MESSAGE', newMessageBody\r\n}) as const","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__3eBwG\"};","import axios from \"axios\";\r\n\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"bcdd4faf-f5b8-4f33-8a06-1a47aa179469\"\r\n    }\r\n});\r\n\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number = 1, pageSize: number = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    followUser(userId: number) {\r\n        return instance.post(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    unfollowUser(userId: number) {\r\n        return instance.delete(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    }\r\n}\r\nexport const profileAPI = {\r\n    getProfile(userId: number) {\r\n        return instance.get(`profile/${userId}`)\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get(`profile/status/${userId}`)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put(`profile/status`, {status: status})\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get(`auth/me`)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean = false) {\r\n        return instance.post(`/auth/login`, {email, password, rememberMe} )\r\n    },\r\n    logout() {\r\n        return instance.delete(`/auth/login` )\r\n    }\r\n}\r\n\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__3nVfw\",\"item\":\"Navbar_item__2Kfqh\",\"active\":\"Navbar_active__9Mx7E\"};","import React from 'react';\r\nimport styles from '../Header/Header.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\ntype HeaderPropsType = {\r\n    isAuth: boolean\r\n    login: string | null\r\n    logout: () => void\r\n}\r\n\r\nfunction Header(props: HeaderPropsType) {\r\n    return (\r\n       <header className={styles.header}>\r\n           <img className={styles.logo} src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Logo_TV_2015.svg/1164px-Logo_TV_2015.svg.png\"\r\n                 alt=\"logj\"/>\r\n\r\n                 <div className={styles.loginBlock}>\r\n                     {\r\n                         props.isAuth\r\n                                 ? <div>{props.login} - <button onClick={props.logout}>log out</button></div>\r\n                     :<NavLink to={\"/login\"}>Login</NavLink>\r\n                     }\r\n                 </div>\r\n       </header>\r\n    )\r\n}\r\nexport default Header;","import { Dispatch } from \"redux\";\r\nimport { ActionTypes, AppStateType } from \"./redux-store\";\r\nimport { authAPI } from \"../api/api\";\r\nimport { AxiosResponse } from \"axios\";\r\nimport { stopSubmit } from \"redux-form\";\r\n\r\nconst SET_USER_DATA = \"SET_USER_DATA\";\r\n//export type setAuthUserDataActionType = ReturnType<typeof setAuthUserData>\r\n\r\nconst initialState = {\r\n  userId: null as number | null,\r\n  email: null as string | null,\r\n  login: null as string | null,\r\n  isAuth: false,\r\n};\r\n\r\nconst authReducer = (state = initialState, action: any): initialAuthState => {\r\n  switch (action.type) {\r\n    case SET_USER_DATA:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype SetAuthUserDataActionPayloadType = {\r\n  userId: number | null;\r\n  email: string | null;\r\n  login: string | null;\r\n  isAuth: boolean;\r\n};\r\nexport type SetAuthUserDataActionType = {\r\n  type: typeof SET_USER_DATA;\r\n  payload: SetAuthUserDataActionPayloadType;\r\n};\r\nexport const setAuthUserData = (\r\n  userId: number | null,\r\n  email: string | null,\r\n  login: string | null,\r\n  isAuth: boolean\r\n): SetAuthUserDataActionType => ({\r\n  type: SET_USER_DATA,\r\n  payload: { userId, email, login, isAuth },\r\n});\r\n\r\nexport const getAuthUserData =\r\n  () =>\r\n  async (dispatch: Dispatch<ActionTypes>, getState: () => AppStateType) => {\r\n    const response = await authAPI.me();\r\n\r\n    if (response.data.resultCode === 0) {\r\n      let { id, email, login } = response.data.data;\r\n      dispatch(setAuthUserData(id, email, login, true));\r\n    }\r\n  };\r\n\r\nexport const login =\r\n  (email: string, password: string, rememberMe: boolean) =>\r\n  async (dispatch: Dispatch<ActionTypes>, getState: () => AppStateType) => {\r\n    const response = await authAPI.login(email, password, rememberMe);\r\n\r\n    if (response.data.resultCode === 0) {\r\n      // @ts-ignore\r\n      dispatch(getAuthUserData());\r\n    } else {\r\n      let message =\r\n        response.data.messages.length > 0\r\n          ? response.data.messages[0]\r\n          : \"Some error\";\r\n      let action = stopSubmit(\"login\", { _error: message });\r\n      dispatch(action);\r\n    }\r\n  };\r\n\r\nexport const logout =\r\n  () =>\r\n  async (dispatch: Dispatch<ActionTypes>, getState: () => AppStateType) => {\r\n    const response = await authAPI.logout();\r\n\r\n    if (response.data.resultCode === 0) {\r\n      console.log(dispatch(setAuthUserData(null, null, null, false)));\r\n    }\r\n  };\r\n\r\nexport default authReducer;\r\n\r\nexport type initialAuthState = typeof initialState;\r\n","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\n\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n    login: string | null\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    logout: () => void\r\n}\r\n\r\ntype HeaderContainerPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nclass HeaderComponent extends React.Component<HeaderContainerPropsType> {\r\n\r\n\r\n    render() {\r\n        return <Header {...this.props}\r\n\r\n        />\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n})\r\nexport default connect(mapStateToProps, {logout})(HeaderComponent);","import React from 'react';\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {requiredField} from \"../../utils/validators/validators\";\r\nimport {createField, Input} from \"../../common/FormsControls/FormsControls\";\r\nimport {connect} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {StatePropsType} from \"../../redux/redux-store\";\r\nimport s from \"../../common/FormsControls/FormsControls.module.css\"\r\n\r\ntype FormDataType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n}\r\n\r\nexport const LoginForm: React.FC<InjectedFormProps<FormDataType>> = ({handleSubmit, error}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n{createField(\"Email\", \"email\", [requiredField], Input)}\r\n{createField(\"Password\", \"password\", [requiredField], Input, {type: \"password\"})}\r\n{createField(null, \"rememberMe\", [], Input, {type: \"checkbox\"}, \"remember me\")}\r\n\r\n\r\n            {/* <div>\r\n                <Field placeholder={\"Email\"} name={\"email\"} validate={[requiredField]} component={Input}/>\r\n            </div>\r\n            <div>\r\n                <Field placeholder={\"Password\"} name={\"password\"} validate={[requiredField]} component={Input}/>\r\n            </div>\r\n            <div>\r\n                <Field component={\"input\"} name={\"rememberMe\"} validate={[requiredField]} type={\"checkbox\"}/> remember\r\n                me\r\n            </div> */}\r\n            {\r\n                error && <div className={s.formSummaryError}>{error}</div>\r\n            }\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<FormDataType>({\r\n    form: 'login'\r\n})(LoginForm)\r\n\r\ntype LoginProps = {\r\n    login: (email: string, password: string, rememberMe: boolean) => void\r\n    isAuth: boolean\r\n}\r\nconst Login = (props: LoginProps) => {\r\n    const onSubmit = (formData: FormDataType) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe)\r\n    }\r\n    if (props.isAuth) {\r\n        return <Redirect to={\"/profile\"}/>\r\n    }\r\n    return <div>\r\n        <h1>Login</h1>\r\n        <LoginReduxForm onSubmit={onSubmit}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state: StatePropsType) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {login})(Login);","import React from 'react';\r\nimport styles from '../Navbar/Navbar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nfunction Navbar() {\r\n    return (\r\n        <div className={styles.nav}>\r\n            <div className={styles.item}>\r\n                <NavLink to=\"/profile\" activeClassName={ `${styles.item} ${styles.active}`}>Profile</NavLink>\r\n            </div>\r\n            <div className={styles.item}>\r\n                <NavLink to=\"/dialogs\" activeClassName={`${styles.item} ${styles.active}`}>Messages</NavLink>\r\n            </div>\r\n            <div className={styles.item}>\r\n                <NavLink to=\"/news\">News</NavLink>\r\n            </div>\r\n            <div className={styles.item}>\r\n                <NavLink to=\"/users\">Users</NavLink>\r\n            </div>\r\n            <div className={styles.item}>\r\n                <NavLink to=\"/music\">Music</NavLink>\r\n            </div>\r\n            <div className={styles.item}>\r\n                <NavLink to=\"/settings\">Settings</NavLink>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Navbar;","export const updateObjectInArray = (\r\n  items: Array<any>,\r\n  itemId: string,\r\n  objPropName: any,\r\n  newObjProps: any\r\n) => {\r\n return items.map((u) => {\r\n    if (u[objPropName] === itemId) {\r\n      return { ...u, newObjProps };\r\n    }\r\n    return u;\r\n  });\r\n};\r\n","import { UserType } from \"./../types/types\";\r\nimport { ActionTypes, AppStateType } from \"./redux-store\";\r\nimport { usersAPI } from \"../api/api\";\r\nimport { Dispatch } from \"redux\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { updateObjectInArray } from \"../utils/object-helpers\";\r\n\r\nconst FOLLOW = \"FOLLOW\";\r\nconst UNFOLLOW = \"UNFOLLOW\";\r\nconst SET_USERS = \"SET_USERS\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\r\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\";\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = \"TOGGLE_IS_FOLLOWING_PROGRESS\";\r\n\r\nexport type InitialUsersState = typeof initialState;\r\nconst initialState = {\r\n  users: [] as Array<UserType>,\r\n  pageSize: 10,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  isFetching: true,\r\n  followingInProgress: [] as Array<number>, //array of users IDs\r\n};\r\n\r\nexport const usersReducer = (\r\n  state = initialState,\r\n  action: any\r\n): InitialUsersState => {\r\n  switch (action.type) {\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userID, \"id\", {\r\n          followed: true,\r\n        }),\r\n      };\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userID, \"id\", {\r\n          followed: false,\r\n        }),\r\n      };\r\n    case SET_USERS:\r\n      return {\r\n        ...state,\r\n        users: action.users,\r\n      };\r\n    case SET_CURRENT_PAGE:\r\n      return {\r\n        ...state,\r\n        currentPage: action.currentPage,\r\n      };\r\n    case SET_TOTAL_USERS_COUNT:\r\n      return {\r\n        ...state,\r\n        totalUsersCount: action.count,\r\n      };\r\n    case TOGGLE_IS_FETCHING: {\r\n      return {\r\n        ...state,\r\n        isFetching: action.isFetching,\r\n      };\r\n    }\r\n    case TOGGLE_IS_FOLLOWING_PROGRESS: {\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFetching\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter((id) => id != action.userId),\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport type FollowSuccessActionType = ReturnType<typeof followSuccess>;\r\nexport type UnfollowSuccessActionType = ReturnType<typeof unfollowSuccess>;\r\nexport type SetUsersActionType = ReturnType<typeof setUsers>;\r\nexport type SetCurrentPageActionType = ReturnType<typeof setCurrentPage>;\r\nexport type SetTotalUsersCountActionType = ReturnType<\r\n  typeof setTotalUsersCount\r\n>;\r\nexport type ToggleIsFetchingActionType = ReturnType<typeof toggleIsFetching>;\r\nexport type ToggleFollowingProgressActionType = ReturnType<\r\n  typeof toggleFollowingProgress\r\n>;\r\n\r\nexport type UsersPageActionTypes =\r\n  | FollowSuccessActionType\r\n  | UnfollowSuccessActionType\r\n  | SetUsersActionType\r\n  | SetCurrentPageActionType\r\n  | SetTotalUsersCountActionType\r\n  | ToggleIsFetchingActionType\r\n  | ToggleFollowingProgressActionType;\r\n\r\nexport const followSuccess = (userID: number) =>\r\n  ({ type: FOLLOW, userID } as const);\r\nexport const unfollowSuccess = (userID: number) =>\r\n  ({ type: UNFOLLOW, userID } as const);\r\nexport const setUsers = (users: Array<UserType>) =>\r\n  ({ type: SET_USERS, users } as const);\r\nexport const setCurrentPage = (currentPage: number) =>\r\n  ({ type: SET_CURRENT_PAGE, currentPage } as const);\r\nexport const setTotalUsersCount = (totalUsersCount: number) =>\r\n  ({ type: SET_TOTAL_USERS_COUNT, count: totalUsersCount } as const);\r\nexport const toggleIsFetching = (isFetching: boolean) =>\r\n  ({ type: TOGGLE_IS_FETCHING, isFetching } as const);\r\nexport const toggleFollowingProgress = (isFetching: boolean, userId: number) =>\r\n  ({\r\n    type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    userId,\r\n  } as const);\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>;\r\n\r\nexport const requestUsers = (\r\n  requestedPage: number,\r\n  pageSize: number\r\n): ThunkType => {\r\n  return async (\r\n    dispatch: Dispatch<ActionTypes>,\r\n    getState: () => AppStateType\r\n  ) => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(setCurrentPage(requestedPage));\r\n\r\n    const data = await usersAPI.getUsers(requestedPage, pageSize);\r\n\r\n    dispatch(toggleIsFetching(false));\r\n    dispatch(setUsers(data.items));\r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n  };\r\n};\r\n\r\nconst followUnfollowFlow = async (\r\n  dispatch: Dispatch<ActionTypes>,\r\n  userId: number,\r\n  apiMethod: any,\r\n  actionCreator: any\r\n) => {\r\n  dispatch(toggleFollowingProgress(true, userId));\r\n  const data = await apiMethod(userId);\r\n\r\n  if (data.resultCode == 0) {\r\n    dispatch(actionCreator(userId));\r\n  }\r\n\r\n  dispatch(toggleFollowingProgress(false, userId));\r\n};\r\n\r\nexport const follow = (userId: number): ThunkType => {\r\n  return async (\r\n    dispatch: Dispatch<ActionTypes>,\r\n    getState: () => AppStateType\r\n  ) => {\r\n    followUnfollowFlow(\r\n      dispatch,\r\n      userId,\r\n      usersAPI.followUser.bind(usersAPI),\r\n      followSuccess\r\n    );\r\n \r\n  };\r\n};\r\n\r\nexport const unfollow = (userId: number): ThunkType => {\r\n  return async (\r\n    dispatch: Dispatch<ActionTypes>,\r\n    getState: () => AppStateType\r\n  ) => {\r\n    followUnfollowFlow(\r\n      dispatch,\r\n      userId,\r\n      usersAPI.unfollowUser.bind(usersAPI),\r\n      unfollowSuccess\r\n    );\r\n \r\n  };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styles from \"./Paginator.module.css\";\r\n// import cn from \"classnames\";\r\n\r\ntype PaginatorPropsType = {\r\n  totalItemsCount: number;\r\n  pageSize: number;\r\n  currentPage: number;\r\n  onPageChanged: (pageNumber: number) => void;\r\n  portionSize: number;\r\n};\r\n\r\nconst Paginator = ({\r\n  totalItemsCount,\r\n  pageSize,\r\n  currentPage,\r\n  onPageChanged,\r\n  portionSize = 10,\r\n}: PaginatorPropsType) => {\r\n  let pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n\r\n  let pages = [];\r\n  for (let i = 1; i <= pagesCount; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  let portionCount = Math.ceil(pagesCount / portionSize);\r\n  let [portionNumber, setPortionNumber] = useState(1);\r\n  let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n  let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n  return (\r\n    <div className={styles.paginator}>\r\n      {portionNumber > 1 && (\r\n        <button\r\n          onClick={() => {\r\n            setPortionNumber((portionNumber - 1));\r\n          }}\r\n        >\r\n          PREV\r\n        </button>\r\n      )}\r\n      {pages\r\n        .filter(\r\n          (p) => p >= leftPortionPageNumber && p <= rightPortionPageNumber\r\n        )\r\n        .map((p) => {\r\n          return (\r\n            <span\r\n              className={currentPage === p ? styles.selectedPage : styles.pageNumber}\r\n              onClick={() => {\r\n                onPageChanged(p);\r\n              }}\r\n            >\r\n              {\" \"}\r\n              {p}{\" \"}\r\n            </span>\r\n          );\r\n        })}\r\n      {portionCount > portionNumber && (\r\n        <button\r\n          onClick={() => {\r\n            setPortionNumber(portionNumber + 1);\r\n          }}\r\n        >\r\n          NEXT\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default Paginator;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { UserType } from \"../../types/types\";\r\nimport styles from \"./Users.module.css\";\r\n\r\ntype UserPropsType = {\r\n  user: UserType;\r\n  follow: (userID: number) => void;\r\n  unfollow: (userID: number) => void;\r\n  followingInProgress: Array<number>;\r\n};\r\n\r\nconst User = ({\r\n  user,\r\n  follow,\r\n  unfollow,\r\n  followingInProgress,\r\n}: UserPropsType) => {\r\n  return (\r\n    <div>\r\n      <span>\r\n        <div>\r\n          {/*  <img src={u.photoUrl} className={styles.userPhoto}/>*/}\r\n          <NavLink to={\"/profile/\" + user.id}>\r\n            <img\r\n              src={\r\n                user.photos.small != null\r\n                  ? user.photos.small\r\n                  : \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQYXYJjncOgjVgYKgD-VHvVHHcA14VgyUf2Xw&usqp=CAU\"\r\n              }\r\n              className={styles.userPhoto}\r\n            />\r\n          </NavLink>\r\n        </div>\r\n        <div>\r\n          {user.followed ? (\r\n            <button\r\n              disabled={followingInProgress.some((id) => id === user.id)}\r\n              onClick={() => {\r\n                unfollow(user.id);\r\n              }}\r\n            >\r\n              Unfollow\r\n            </button>\r\n          ) : (\r\n            <button\r\n              disabled={followingInProgress.some((id) => id === user.id)}\r\n              onClick={() => {\r\n                follow(user.id);\r\n              }}\r\n            >\r\n              Follow\r\n            </button>\r\n          )}\r\n        </div>\r\n      </span>\r\n      <span>\r\n        <div>{user.name}</div>\r\n        <div>{user.status}</div>\r\n      </span>\r\n      <span>\r\n        <div>{\"u.location.country\"}</div>\r\n        <div>{\"u.location.city\"}</div>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { UserType } from \"../../types/types\";\r\nimport Paginator from \"../../common/Paginator/Paginator\";\r\nimport styles from \"./Users.module.css\";\r\nimport User from \"./User\";\r\nimport { unfollow } from \"../../redux/users-reducer\";\r\n\r\ntype UsersPropsType = {\r\n  totalUsersCount: number;\r\n  pageSize: number;\r\n  currentPage: number;\r\n  onPageChanged: (pageNumber: number) => void;\r\n  users: Array<UserType>;\r\n  follow: (userID: number) => void;\r\n  unfollow: (userID: number) => void;\r\n  followingInProgress: Array<number>;\r\n};\r\n\r\nconst Users = ({\r\n  currentPage,\r\n  onPageChanged,\r\n  totalUsersCount,\r\n  pageSize,\r\n  users,\r\n  followingInProgress,\r\n  follow,\r\n  unfollow,\r\n}: UsersPropsType) => {\r\n  return (\r\n    <div>\r\n      <Paginator\r\n        totalItemsCount={totalUsersCount}\r\n        pageSize={pageSize}\r\n        currentPage={currentPage}\r\n        onPageChanged={onPageChanged}\r\n        portionSize={10}\r\n      />\r\n      <div>\r\n        {users.map((u) => (\r\n          <User\r\n            key={u.id}\r\n            user={u}\r\n            follow={follow}\r\n            unfollow={unfollow}\r\n            followingInProgress={followingInProgress}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import { AppStateType } from './redux-store';\r\n\r\nexport const getUsers = (state: AppStateType) => {\r\n    return state.usersPage.users\r\n}\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\nexport const getIsFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  follow,\r\n  requestUsers,\r\n  setCurrentPage,\r\n  unfollow,\r\n} from \"../../redux/users-reducer\";\r\nimport { AppStateType } from \"../../redux/redux-store\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport { compose } from \"redux\";\r\nimport { UserType } from \"../../types/types\";\r\nimport {\r\n  getCurrentPage,\r\n  getFollowingInProgress,\r\n  getIsFetching,\r\n  getPageSize,\r\n  getTotalUsersCount,\r\n  getUsers,\r\n} from \"./../../redux/users-selectors\";\r\n\r\ntype MapStateToPropsType = {\r\n  users: Array<UserType>;\r\n  pageSize: number;\r\n  totalUsersCount: number;\r\n  currentPage: number;\r\n  isFetching: boolean;\r\n  followingInProgress: Array<number>;\r\n};\r\ntype MapDispatchToPropsType = {\r\n  follow: (userID: number) => void;\r\n  unfollow: (userID: number) => void;\r\n  setCurrentPage: (pageNumber: number) => void;\r\n  requestUsers: (currentPage: number, pageSize: number) => void;\r\n};\r\nexport type UsersContainerPropsType = MapStateToPropsType &\r\n  MapDispatchToPropsType;\r\n\r\nclass UsersContainer extends React.Component<UsersContainerPropsType> {\r\n  componentDidMount() {\r\n    const { currentPage, pageSize } = this.props;\r\n\r\n    this.props.requestUsers(currentPage, pageSize);\r\n  }\r\n\r\n  onPageChanged = (pageNumber: number) => {\r\n    const { pageSize } = this.props;\r\n    this.props.requestUsers(pageNumber, pageSize);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.isFetching ? (\r\n          <Preloader />\r\n        ) : (\r\n          <Users\r\n            onPageChanged={this.onPageChanged}\r\n            totalUsersCount={this.props.totalUsersCount}\r\n            pageSize={this.props.pageSize}\r\n            currentPage={this.props.currentPage}\r\n            users={this.props.users}\r\n            follow={this.props.follow}\r\n            unfollow={this.props.unfollow}\r\n            followingInProgress={this.props.followingInProgress}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\n/*const mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n    return {\r\n        users: state.usersPage.users,\r\n        pageSize: state.usersPage.pageSize,\r\n        totalUsersCount: state.usersPage.totalUsersCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching,\r\n        followingInProgress: state.usersPage.followingInProgress\r\n    }\r\n}*/\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n  return {\r\n    users: getUsers(state),\r\n    pageSize: getPageSize(state),\r\n    totalUsersCount: getTotalUsersCount(state),\r\n    currentPage: getCurrentPage(state),\r\n    isFetching: getIsFetching(state),\r\n    followingInProgress: getFollowingInProgress(state),\r\n  };\r\n};\r\n\r\n/*let withRedirect = withAuthRedirect(UsersContainer)\r\n\r\n\r\nexport default connect(mapStateToProps, {\r\n    setCurrentPage,\r\n    getUsers,\r\n    follow,\r\n    unfollow\r\n})(withRedirect);*/\r\n\r\nexport default compose<React.ComponentType>(\r\n  connect(mapStateToProps, { setCurrentPage, requestUsers, follow, unfollow })\r\n  //withAuthRedirect\r\n)(UsersContainer);\r\n","import {Redirect} from \"react-router-dom\";\r\nimport React, {ComponentType} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/redux-store\";\r\n\r\n\r\n\r\nexport function withSuspense <T>(Component: ComponentType<T>) {\r\n\r\n    return (props: any) => {\r\n        return <React.Suspense fallback={<div>Loading...</div>}>\r\n        <Component {...props} />\r\n      </React.Suspense>\r\n    }\r\n}","import { getAuthUserData } from './auth-reducer';\r\nimport { Dispatch } from \"redux\";\r\nimport { ActionTypes, AppStateType } from \"./redux-store\";\r\nimport { authAPI } from \"../api/api\";\r\nimport { AxiosResponse } from \"axios\";\r\nimport { stopSubmit } from \"redux-form\";\r\n\r\n\r\nconst INITIALIZED_SUCCSESS = 'INITIALIZED_SUCCSESS';\r\n\r\nexport type InitialAppStateType = typeof initialState\r\nconst initialState = {\r\n    initialized: false\r\n};\r\n\r\nexport const appReducer = (state = initialState, action: any): InitialAppStateType => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCSESS:\r\n\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport type InitializedSuccessActionType = {\r\n    type: typeof INITIALIZED_SUCCSESS,\r\n\r\n}\r\nexport const initializedSuccess = (): InitializedSuccessActionType => ({ type: INITIALIZED_SUCCSESS });\r\n\r\n\r\nexport const initializeApp = () => (dispatch: Dispatch<any>, getState: () => AppStateType) => {\r\n\r\n    const promise = dispatch(getAuthUserData());\r\n\r\n    Promise.all([promise]).then(() => {\r\n        dispatch(initializedSuccess())\r\n    })\r\n\r\n\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Route, withRouter } from \"react-router-dom\";\r\nimport { compose } from \"redux\";\r\nimport \"./App.css\";\r\nimport Preloader from \"./common/Preloader/Preloader\";\r\n\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\n\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport { withSuspense } from \"./hoc/withSuspense\";\r\nimport { initializeApp } from \"./redux/app-reducer\";\r\nimport { AppStateType } from \"./redux/redux-store\";\r\n\r\nconst DialogsContainer = React.lazy(\r\n  () => import(\"./components/Dialogs/DialogsContainer\")\r\n);\r\nconst ProfileContainer = React.lazy(\r\n  () => import(\"./components/Profile/ProfileContainer\")\r\n);\r\n\r\ntype MapStateToPropsType = {\r\n  initialized: boolean;\r\n};\r\ntype MapDispatchToPropsType = {\r\n  initializeApp: () => void;\r\n};\r\n\r\ntype AppComponentPropsType = MapStateToPropsType & MapDispatchToPropsType;\r\n\r\nclass App extends React.Component<AppComponentPropsType> {\r\n  componentDidMount() {\r\n    this.props.initializeApp();\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.initialized) {\r\n      return <Preloader />;\r\n    }\r\n    return (\r\n      <div className=\"app-wrapper\">\r\n        <HeaderContainer />\r\n        <Navbar />\r\n        <div className=\"app-wrapper-content\">\r\n          <Route\r\n            path={\"/profile/:userId?\"}\r\n            render={withSuspense(ProfileContainer)}\r\n          />\r\n          <Route\r\n            path={\"/dialogs\"}\r\n            render={ withSuspense(DialogsContainer)}\r\n          />\r\n          <Route\r\n            path={\"/users\"}\r\n            render={ withSuspense(UsersContainer) }\r\n          />\r\n          <Route path={\"/login\"} render={() => <Login />} />\r\n          {/*<Route path ={'/news'} component={News}/>\r\n                    <Route path ={'/music'} component={Music}/>\r\n                    <Route path ={'/settings'} component={Settings}/>*/}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => ({\r\n  initialized: state.app.initialized,\r\n});\r\n\r\nexport default compose<React.ComponentType>(\r\n  withRouter,\r\n  connect(mapStateToProps, { initializeApp })\r\n)(App);\r\n","let initialState = {};\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n    return state;\r\n}\r\n\r\nexport default sidebarReducer;","import { appReducer, InitialAppStateType } from \"./app-reducer\";\r\nimport { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport profileReducer, {\r\n  AddPostActionType,\r\n  ProfilePageType,\r\n  SetUserProfileACActionType,\r\n  SetUserStatusActionType,\r\n} from \"./profile-reducer\";\r\nimport dialogsReducer, {\r\n  DialogsPageType,\r\n  SendMessageActionType,\r\n} from \"./dialogs-reducer\";\r\nimport {\r\n  InitialUsersState,\r\n  UsersPageActionTypes,\r\n  usersReducer,\r\n} from \"./users-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport authReducer, {\r\n  initialAuthState,\r\n  SetAuthUserDataActionType,\r\n} from \"./auth-reducer\";\r\nimport { FormAction, reducer as formReducer } from \"redux-form\";\r\n\r\nexport type ActionTypes =\r\n  | AddPostActionType\r\n  | SendMessageActionType\r\n  | UsersPageActionTypes\r\n  | SetUserProfileACActionType\r\n  | SetAuthUserDataActionType\r\n  | SetUserStatusActionType\r\n  | FormAction;\r\n\r\nexport type StatePropsType = {\r\n  profilePage: ProfilePageType;\r\n  dialogsPage: DialogsPageType;\r\n  usersPage: InitialUsersState;\r\n  auth: initialAuthState;\r\n  app: InitialAppStateType;\r\n};\r\n\r\n//редаксовская ф-я смешивающая редюсеры\r\nconst rootReducer = combineReducers({\r\n  profilePage: profileReducer,\r\n  dialogsPage: dialogsReducer,\r\n  sidebar: sidebarReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer,\r\n});\r\n\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunkMiddleware))\r\n);\r\n\r\n//typeof rootReducer - это типизация функции, а ф-я что-то возвращает; и мы говорим дай мне возвращаемый тип\r\nexport type AppStateType = ReturnType<typeof rootReducer>;\r\n\r\n//export type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport { store } from \"./redux/redux-store\";\r\n\r\nReactDOM.render(\r\n  //process.env.PUBLIC_URL - возьми URL из окружения (environment)\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import React, { Component } from \"react\";\r\nimport { Field } from \"redux-form\";\r\nimport s from \"./FormsControls.module.css\";\r\n\r\n// @ts-ignore\r\nexport const FormControl = ({ input, meta: {touched, error}, children }) => {\r\n  const hasError = touched && error;\r\n\r\n  return (\r\n    <div className={s.formControl + \" \" + (hasError ? s.error : \"\")}>\r\n      <div>{children}</div>\r\n      {hasError && <span>{error}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\n//rest-оператор; пропсы будут содержать всё кроме инпута и меты\r\n// @ts-ignore\r\nexport const Textarea = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <textarea {...input} {...restProps} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\n// @ts-ignore\r\nexport const Input = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <input {...input} {...restProps} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport const createField = (\r\n  placeholder: string | null,\r\n  name: string,\r\n  validators: any[],\r\n  component: any,\r\n  props: any  = {},\r\n  text?: string\r\n) => (\r\n  <div>\r\n    <Field\r\n      placeholder={placeholder}\r\n      name={name}\r\n      validate={validators}\r\n      component={component}\r\n      {...props}\r\n    /><span>{text}</span>\r\n  </div>\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__3dg2r\",\"error\":\"FormsControls_error__1S_b0\",\"formSummaryError\":\"FormsControls_formSummaryError__1TeGy\"};","\r\nimport React from \"react\";\r\nimport preloader from \"./preloader.png\";\r\n\r\n const Preloader = (props) => {\r\n\r\n    return <div>\r\n        <img src={preloader} />\r\n    </div>\r\n}\r\n\r\nexport default Preloader;\r\n","export default \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3dq1q\",\"logo\":\"Header_logo__3787I\",\"loginBlock\":\"Header_loginBlock__1ZkTu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__3JWG2\",\"paginator\":\"Paginator_paginator__29l8-\",\"pageNumber\":\"Paginator_pageNumber__2lZqn\"};","export const requiredField = (value: any) => {\r\n    if (value) return undefined\r\n\r\n    return \"Field is required\"\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number) =>\r\n    (value: string) => {\r\n        if (value && value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n\r\n        return undefined\r\n    }","import { ActionTypes, AppStateType } from \"./redux-store\";\r\nimport { Dispatch } from \"redux\";\r\nimport { profileAPI, usersAPI } from \"../api/api\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { AxiosResponse } from \"axios\";\r\nimport {\r\n  PostType,\r\n  ProfilePhotosType,\r\n  ProfileResponseType,\r\n} from \"../types/types\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst DELETE_POST = \"DELETE-POST\";\r\nconst SET_USER_PROFILE = \"SET-USER-PROFILE\";\r\nconst SET_USER_STATUS = \"SET_USER_STATUS\";\r\n\r\n//тайпсриптовая штучка аналогичная type AddPostActionType = { type: 'ADD-POST'}\r\n// но позволяющая не писать типизацию 100 раз, а брать её из экшн креэйтеров\r\nexport type AddPostActionType = ReturnType<typeof AddPostActionCreator>;\r\nexport type SetUserProfileACActionType = ReturnType<typeof setUserProfile>;\r\nexport type SetUserStatusActionType = ReturnType<typeof setUserStatus>;\r\n\r\nconst initialState = {\r\n  profile: null as ProfileResponseType | null,\r\n  postsData: [\r\n    { id: \"1\", postMessage: \"Hi! It's my first post\", likesCount: 3 },\r\n    { id: \"2\", postMessage: \"Yo!\", likesCount: 12 },\r\n  ] as Array<PostType>,\r\n  isAuth: false,\r\n  status: \"\",\r\n};\r\n\r\nexport type ProfilePageType = typeof initialState;\r\n\r\nconst profileReducer = (state = initialState, action: any): ProfilePageType => {\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      let newPost = {\r\n        id: \"3\",\r\n        postMessage: action.newPostText,\r\n        likesCount: 0,\r\n      };\r\n      return {\r\n        ...state,\r\n        postsData: [...state.postsData, newPost],\r\n      };\r\n    }\r\n\r\n    case DELETE_POST: {\r\n      return {\r\n        ...state,\r\n        postsData: state.postsData.filter((p) => p.id !== action.postId),\r\n      };\r\n    }\r\n\r\n    case SET_USER_PROFILE: {\r\n      return {\r\n        ...state,\r\n        profile: action.profile,\r\n      };\r\n    }\r\n\r\n    case SET_USER_STATUS: {\r\n      return {\r\n        ...state,\r\n        status: action.status,\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const AddPostActionCreator = (newPostText: string) =>\r\n  ({\r\n    type: ADD_POST,\r\n    newPostText,\r\n  } as const);\r\nexport const DeletePostActionCreator = (postTd: string) =>\r\n  ({\r\n    type: DELETE_POST,\r\n    postTd,\r\n  } as const);\r\n\r\nconst setUserProfile = (profile: ProfileResponseType) =>\r\n  ({\r\n    type: SET_USER_PROFILE,\r\n    profile,\r\n  } as const);\r\n\r\nconst setUserStatus = (status: string) =>\r\n  ({\r\n    type: SET_USER_STATUS,\r\n    status,\r\n  } as const);\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>;\r\n\r\nexport const getUserProfile =\r\n  (userId: number): ThunkType =>\r\n  async (dispatch: Dispatch<ActionTypes>, getState: () => AppStateType) => {\r\n    const response = await profileAPI.getProfile(userId);\r\n\r\n    dispatch(setUserProfile(response.data));\r\n  };\r\n\r\nexport const getUserStatus =\r\n  (userId: number): ThunkType =>\r\n  async (dispatch: Dispatch<ActionTypes>, getState: () => AppStateType) => {\r\n    const response = await profileAPI.getStatus(userId)\r\n    \r\n      dispatch(setUserStatus(response.data));\r\n\r\n  };\r\n\r\nexport const updateUserStatus =\r\n  (status: string): ThunkType =>\r\n  async (dispatch: Dispatch<ActionTypes>, getState: () => AppStateType) => {\r\n    const response = await profileAPI.updateStatus(status)\r\n      \r\n        if (response.data.resultCode === 0) {\r\n          dispatch(setUserStatus(status));\r\n        }\r\n\r\n  };\r\n\r\nexport default profileReducer;\r\n"],"sourceRoot":""}